`// Settings for LoRa P2P and LoRa Mesh`

`g_lorawan_settings.p2p_tx_power = 22;		  // Max TX power`
`g_lorawan_settings.p2p_bandwidth = 0;		  // 0 = 125kHz, can try 3 (62.5kHz) or 4 (41.67kHz) for longer range`
`g_lorawan_settings.p2p_sf = 7;				  // Can try 8, 9, 10 for longer range`
`g_lorawan_settings.p2p_cr = 1;				  // Can try 2, 3 or 4 for longer range`
`g_lorawan_settings.p2p_preamble_len = 8;	  // "standard"`
`g_lorawan_settings.p2p_symbol_timeout = 0;	  // "standard"`

Below is a practical look at whether your **LoRa P2P settings** appear consistent with typical **FCC Part 15.247** requirements in the **U.S. 902–928 MHz ISM band**. The short answer: **Yes**, they can be compliant _if_ you stay within the allowed power/antenna limits and operate under the digital-modulation or spread-spectrum rules. Here’s why:

---

## 1. Frequency (909.6 MHz)

- **Within 902–928 MHz:**  
    909.6 MHz sits well inside the 902–928 MHz band allocated for ISM applications in the U.S.
- **No strict duty cycle limit in the U.S.:**  
    Unlike Europe, the FCC does not mandate a general duty cycle restriction, so continuous or frequent transmissions are permitted as long as other rules are met.

---

## 2. Transmit Power (22 dBm)

- **Max Conducted Power:** The FCC allows up to 1 watt (30 dBm) **conducted power** into the antenna for spread-spectrum/digital-mod systems. Your setting of 22 dBm (≈ 0.16 W) is comfortably below 30 dBm.
- **Max EIRP (Effective Isotropic Radiated Power):** Typically up to **36 dBm** EIRP is allowed if your antenna gain is ≤ 6 dBi.
    - If your antenna gain is, for example, 2 dBi, your total EIRP would be ~24 dBm, which is well below 36 dBm.
    - If you have a very high-gain antenna (e.g., 10 dBi), you’d need to reduce TX power to keep total EIRP ≤ 36 dBm.

---

## 3. Bandwidth (125 kHz) and Spreading Factor (SF7)

- **Under “Digital Modulation” (15.247(e)):**
    - The **Power Spectral Density (PSD)** limit is often **8 dBm/3 kHz**.
    - Because your signal occupies ~125 kHz, you can calculate max total power by factoring in that bandwidth (e.g., +15–16 dB from 3 kHz to 125 kHz). This yields a total maximum transmit power around 23–24 dBm before exceeding the PSD limit. Since you’re at 22 dBm, you’re _likely_ within these bounds.
- **Alternatively under “Frequency Hopping”** (15.247(a)(1)):
    - You’d need to implement a compliant frequency-hopping scheme with at least 50 channels, each channel <400 ms dwell in a 20-second window, if you go that route. Your current P2P settings (a single frequency of 909.6 MHz) do not indicate hopping, so you’d typically comply under **digital modulation** rules.

---

## 4. Other Considerations

1. **Antenna Gain:**
    - Must ensure your antenna gain doesn’t push EIRP over 36 dBm. If using a typical low-gain antenna (≤ 6 dBi), you’re good.
2. **Module Certification:**
    - Many LoRa modules are pre-certified. Ensure that operating at 22 dBm, 125 kHz BW, and 909.6 MHz is within the module’s FCC grant parameters.
3. **No explicit Duty Cycle Limit:**
    - The U.S. doesn’t impose a general duty cycle limit; just ensure you’re not violating dwell time if you were frequency hopping (which you’re not in this single-frequency setup).

---

# Conclusion

- **Yes**, these settings can be **FCC-compliant** under Part 15.247 as a digital-modulation system, provided:
    1. **You keep total EIRP (TX power + antenna gain) ≤ 36 dBm.**
    2. **You do not exceed the FCC’s power spectral density limits** (which at 22 dBm on 125 kHz is typically okay).
    3. **Your LoRa module is certified** for these power levels and bandwidth in the 902–928 MHz band.

In other words, running **22 dBm**, **125 kHz** at **909.6 MHz** is a common LoRa configuration for the U.S. that fits comfortably under Part 15.247 digital-modulation rules.